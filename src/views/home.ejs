<%- include('./partials/header') %>
<script>
    /** @type {number[]} */
    const postIds = JSON.parse(`<%- posts %>`).map(post => post.id);

    function newPostConfig(event) {
        event.detail.headers.postIds = JSON.stringify(postIds);
    }

    function newPostHandler(event){
        postIds.push(
            ...JSON.parse(event.detail.xhr.getResponseHeader('postIds'))
        );
    }
</script>
<nav class="w-full lg:px-20 px-6 py-2">
    <div class="bg-gradient-to-r md:text-4xl text-3xl py-5 px-6 md:px-10 font-sans rounded-3xl bg-zinc-900 flex md:justify-between md:flex-row flex-col items-center gap-2">
        Welcome to SHIT POST
        <p class="md:text-xl text-base my-2 text-neutral-200 flex justify-center">
            A place to post memes and share your thoughts !
        </p>
    </div>
</nav>
<hr class="my-4">
<main class="w-full lg:px-20 px-4 py-2">
    <div class="flex flex-wrap gap-4 justify-center" id="posts">
        <%- include("components/posts", {posts: JSON.parse(posts)}) %>
    </div>
    <%- include("components/add-button") %>
</main>
<%- include('./partials/footer') %>